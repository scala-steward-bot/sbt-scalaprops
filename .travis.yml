language: scala

cache:
  directories:
    - $HOME/.ivy2/cache
    - $HOME/.sbt/launchers

jdk:
  - oraclejdk8

sudo: required

dist: trusty

before_install:
- curl https://raw.githubusercontent.com/scala-native/scala-native/v0.3.0/bin/travis_setup.sh | bash -x

script:
  - git config core.whitespace tab-in-indent,trailing-space,space-before-tab,cr-at-eol
  - git show --oneline --check
  - sbt "^^ ${SBT_VERSION}" compile test:compile test scripted $(if [[ "${TRAVIS_PULL_REQUEST}" == "false" && "${TRAVIS_BRANCH}" == "master" ]]; then echo "publish"; fi)
  - find $HOME/.ivy2/cache -name "ivydata-*.properties" | xargs rm
  - find $HOME/.ivy2/cache -name "*SNAPSHOT*" | xargs rm -rf

env:
  matrix:
  - SBT_VERSION="0.13.15"
  - SBT_VERSION="1.0.0-M6"
  global:
  - secure: AXMvOz3ecotKjscF0DAGGsLynMKDXiPFRc0NE0tjAeu5N8KgIeuLB6rK3NalpNoAm8yJYA2kxicRYfvaJDpdhuBo8FO+p5iymlnAxHUeqpnaqRa5/Ua7IciqU0sDjLTOHyaUVUK6Ni4I3Iw6CaTLGLy057GqsEybSHH/TR6zsTz61pEdTUgKx80uE1mRmwWsjbe09qn5J5/BrmmVVvJKhoDiXZPhnBrRwb0ljPHzZbk4WWayh5WrNuLpz0niMvasxhdsWh6IwjsxiuwMawrlsHQuFkKHNiZH1tsJjMOcx/lEl36OMfc19QE/zci1KWDyr0ygQJDRPy3xTd+W6WM7ZEaH75PI+rVa3aDfF3WlFb6XaVl1PHLvqjuw5HC/30kYffR4vpbP1VTBtnHa3bRsb9Jk3/PhLXrQX7QSlyA3qOw3yv8R56G8INiFkkRI3lMpEU42uqglfksShkgbOoMOJlYRlA2BfJRNp44S+yrDGw3ZWFZB3Gldn6bvIa8ev6uAD3hx98edrzyfsLLLdSONPPM7iQgbIjNUdcIfN2zWR48EL49VRbQq711YddSz5EhlsYh1vlC6bcyWp1Uj/Tj94DbLhxyigKg+lR2m9d1pSfC/8QOmRiUEb8SmXgxCAah+ukPrTsSUum9T5M8VeZ4QIUsysjybsKoYvkMUw8dESQ8=
  - secure: kBGsTeEeF1RLcOolRvNHmFedqD/VU+PGCj7d36PSbA1qSuu03Lu/YnMA29nj6iWsxhS74sO/1Eta2AKwEEgBuuqFaxMr07B0OgNZLA3sLjgQTU92TFkL6lHkAmUAEq5LD7VCdgX8qKgx8NbJJ47hWNdThZxTJ4VhZCP4sgCG6l61LF/d6CwcGJyQEwgKusH3uanhcPD5nB0y510MMpkCVQFFWu/Vb0WBxaUxXOswoJvu2CkfLFtTVqfIBscDqjGw/3sP/eRMJGqYYpHnQ29li4X7+Hz/U7CS/4plmGJ5QXCuX/1naJuAtN3O0jo0i5iyY8EwKtLUcCrA22+dbPvAhbLuw8iWg/cGlWQ+rFA4srCXW1bcSfF26FaRaa4gw2L06AcdKpN1/no4fNPfDoLyFiCID2Li2bb7kkptYLAfTzZzT5ITku4KiCPivTwUqnoVgaGK7NloFriISVFFDMUAsBCR7FUcVBxmHzGOeuNfTOTUJOiiM8RQdKOaR/ipAi6wIXqQeR3fYO+JR8IIzZp47kNNEey+GpMQr4gjF70CMfCCDXCwzQRPQbU900v4M+kohT6gaZgY+WVITdONKl4dSTOA0q0TsvMpOC0RBAP/68v2QFMC584S765cy50HYgj9m9MsUc1kaUKTCLq0zz/QyUNc3c7QCUjj9nB18IBxFEg=
